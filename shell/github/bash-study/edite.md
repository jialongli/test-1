# 允许命令行编辑

我们可以把 shell 设置为 emacs 模式 或 vi 模式。
在 shell 里有两种方式选择编辑模式：set命令和编辑.inputrc文件的readline变量。

## 历史文件
    .bash\_history 文件
    环境变量 HISTFILE

## emacs 模式

### 基本命令

* CTRL-B 向后移一个字符
* CTRL-F 向前移动一个字符
* DEL 向后删除一个字符
* CTRL-D 向前删除一个字符

### 单词命令

 命令行编辑
* ESC-B 向后移动一个单词
* ESC-F 向前移动一个单词
* ESC-DEL 向前删除一个单词
* ESC-CTRL-H 向前删除一个单词
* ESC-D 向后删除一个单词
* CTRL-Y 恢复最后删除的项

### 行命令

* CTRL-A 移到行开始处
* CTRL-E 移到行结尾处
* CTRL-K 向前删除到行尾

### 在历史文件中移动

* CTRL-P 移到前一行
* CTRL-N 移到后一行
* CTRL-R 向后搜索
* ESC-< 移到历史文件的第一行
* ESC->: 移到历史文件的最后一行

### 文字完成

也就是智能提示功能

* TAB
* ESC-?
* ESC-/
* CTRL-X/
* ESC-~
* CTRL-X~
* ESC-$
* CTRL-X$
* ESC-@
* CTRL-X@
* CTRL-X @
* ESC-!
* CTRL-X!
* ESC-TAB


### 杂项命令

* CTRL-J 等同与RETURN
* CTRL-L 清除屏幕
* CTRL-M 等同与RETURN
* CTRL-O 等同与RETURN
* CTRL-T 交换光标左右的两个字符
* CTRL-U 从光标位置开始删除行
* CTRL-V 引用插入
* CTRL-| 等同于 ESC
* ESC-C 光标处单词首字母大写
* ESC-U 光标处单词全部大写
* ESC-L 光标处单词全部小写
* ESC-. 在光标后插入前面命令行总的最后一个单词
* ESC-\_ 等同于 ESC-.


## vi 编辑模式

关于 vi 的详细命令,可以参考 [VIM 使用笔记](https://github.com/tiankonguse/VIM-study)  

* DEL 删除前面的字符
* CTRL-W 删除前面的单词
* CTRL-V 引用下一个字符
* ESC  输入控制模式

### 简单的控制模式命令

* h 向左移动一个字符
* l 向右移动一个字符
* w 向右移动一个单词
* b 向左移动一个单词
* W 移到下一个非空字符的开始
* B 移到上一个非空字符的开始
* e 移到当前单词的结尾
* E 移到当前非空单词的结尾
* 0 移到行首
* ^ 移到行内地一个非空字符
* $ 移到行尾

### 输入文本和改变文本 

* i 在当前字符前插入文本
* a 在当前字符后插入文本
* I 在行首插入文本
* A 在行尾插入文本
* R 用文本覆盖已存在的文本

### 删除命令

* dh 向后删除一个字符
* dl 向前删除一个字符
* db 向后删除一个单词
* dw 向前删除一个单词
* dB 向后删除一个非空单词
* dW 向前删除一个非空单词
* d$ 删除到行尾
* d0 删除到行首

### 在历史文件中移动

* k或- 向后移动一行
* j或+ 向前移动一行
* G 移动到重复计数制定的行
* /string 向后搜索字符串
* ?string 向前搜索字符串
* n 在前一条搜索命令的同一方向重复进行搜索
* N 在前一条搜索命令的相反方向重复进行搜索


### 字符查找命令

* fx 向右移到x下一次出现的位置
* Fx 向左移到x前一次出现的位置
* tx 向右移到x下一次出现的位置，并后退一格
* Tx 向左移到x前一次出现的位置，并前进一格
* ; 重复上一次字符查找命令
* , 以相反方向重复上一次字符查找命令


### 文字完成

与 emacs 模式中的 TAB 键功能一样。

### 杂项命令

~ 转换当前字符大小写
- 扩充前面命令最后一个单词
CTRL-L 清除屏幕
\#  给当前行前面加#符号，当注释


## fc 命令

## 历史扩展

### 事件标志符

* ! 启动历史替换
* !! 引用最后一个命令
* !n 引用命令行n
* !-n 引用的那个钱命令行-n
* !string 引用以 string 开始的最新历史命令
* !?string? 引用包含 string 的最新历史命令，结尾的?可选
* ^string1^string2 恢复最后的命令，用 string2 替换 string1

### 单词标志符

### 修改符

## readline

### readline 启动文件
默认启动文件称为.inputrc。

### readline 变量

### 使用 bind 的键捆绑

### 键盘习惯

